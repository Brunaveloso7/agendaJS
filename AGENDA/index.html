<!DOCTYPE html>
<html lang="pt-br">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Agenda</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>

  <header>
    <h1>ğŸ“” Minha Agenda</h1>
  </header>

  <main>
    <div class="formulario">
      <input id="tarefas" type="text" placeholder="Insira aqui sua tarefa" />
      <input id="selecionar-data" type="date" />
      <button onclick="adicionarTarefa()">Adicionar Tarefa</button>
    </div>

    <div id="lista-de-tarefas"></div>
  </main>

  <script>
    
    let afazeres;
    const afazeresSalvos = JSON.parse(localStorage.getItem("afazeres"));
    if(Array.isArray(afazeresSalvos)){
      afazeres = afazeresSalvos;
    } else {
      afazeres = [
        { nome: "Lavar louÃ§a", data: "2025-08-20", id: "id1" },
        { nome: "Secar louÃ§a", data: "2025-08-25", id: "id2" },
        { nome: "Estender roupa", data: "2025-08-22", id: "id3" },
        { nome: "Assistir jogo do Bahia", data: "2025-08-16", id: "id4" }
      ];
    }

    const salvarTarefas = () => localStorage.setItem("afazeres", JSON.stringify(afazeres));

    const renderizar = () => {
      const lista = document.getElementById("lista-de-tarefas");
      lista.innerHTML = "";

      afazeres.forEach(tarefa => {
        const elemento = document.createElement("div");

        const partes = tarefa.data.split("-");
        const dataFormatada = `${partes[2]}/${partes[1]}/${partes[0]}`;
        elemento.innerHTML = `<span>${tarefa.nome}</span> - ${dataFormatada}`;


        const botaoApagar = document.createElement("button");
        botaoApagar.innerText = "Apagar";
        botaoApagar.id = tarefa.id;
        botaoApagar.onclick = apagarTarefa;

        elemento.appendChild(botaoApagar);
        lista.appendChild(elemento);
      });
    };

    const adicionarTarefa = () => {
      const campoTarefa = document.getElementById("tarefas");
      const campoData = document.getElementById("selecionar-data");

      if(!campoTarefa.value || !campoData.value){
        alert("Preencha todos os campos!");
        return;
      }

      const novaTarefa = {
        nome: campoTarefa.value,
        data: campoData.value,
        id: new Date().getTime().toString()
      };

      afazeres.push(novaTarefa);
      salvarTarefas();
      renderizar();

      campoTarefa.value = "";
      campoData.value = "";
    };

    const apagarTarefa = (evento) => {
      const id = evento.target.id;
      afazeres = afazeres.filter(t => t.id !== id);
      salvarTarefas();
      renderizar();
    };

    renderizar();
  </script>

</body>
</html>
